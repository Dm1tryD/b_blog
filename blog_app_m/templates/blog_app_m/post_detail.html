{% extends 'blog_app_m/base_blog_app_m.html' %}

{% block title %}
    {{ post.title }} - {{ block.super }}
{% endblock %}


{% block content %}
    <div class="container.fluid">
        <h2 class="mt-5">
            {{ post.title }}
        </h2>
        <p>{{ post.body }}</p>
        <p><div>Author - {{ post.author }}</div></p>
        <p><div>last change {{ post.date_change|date:'d.m.Y' }} </div></p>
        <p><div>Comments ({{ post.comments_post.all.count }})</div></p>
        <div class="col-4">Your comment
            <form class="card-text mb-5" action="" method="post">
                {% csrf_token %}
                {% for field in form %}
                    <div class="form-group">
                        {% if field.errors %}
                            <div class="alert-danger">
                                {{ field.errors }}
                            </div>
                        {% endif %}
                        {{ field }}
                    </div>
                {% endfor %}
                <button type="submit" class="btn-primary">Post comment</button>
            </form>
        </div>
        {% for comment in post.comments_post.all %}
            <p>{{ comment.comment_text }}</p>
            <h6>Author - {{ comment.author }}</h6>
            <h6>{{ comment.date_create|date:'d.m.Y' }}</h6>
        {% endfor %}
    </div>
{% endblock %}